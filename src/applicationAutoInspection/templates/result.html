{% load staticfiles %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="author" content="zyl">
    <link rel="stylesheet" type="text/css" href="{% static 'applicationAutoInspection/css/base.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'applicationAutoInspection/css/reportlist.css' %}"/>	
	<link rel="stylesheet" type="text/css" href="{% static 'applicationAutoInspection/css/pikaday.css' %}"/>	
	<script src= "{% static 'applicationAutoInspection/js/jquery-1.11.3.min.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/moment.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/pikaday.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/pikaday.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/distpicker.data.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/distpicker.js' %}"></script>
	<script src= "{% static 'applicationAutoInspection/js/myjs.js' %}"></script>
  </head>
  <body>
    <title>巡检报告展示平台</title>
	<div id="header">
	  <h1 id="headerTxt">巡检报告展示平台</h1>
    </div>
    <div id="adiv">
	  <div id="condition">
	    <h1>查询条件</h1>
	    <span class="label">系统</span>
		<input type="text" id="system"/>
		<span class="label">报告提交人员</span>
		<input type="text" id="reporter" />
        <div class="distpicker1">
		  <span class="label">地区</span>
          <select id="province"></select>
          <select id="city"></select>
        </div>
		<span class="label">开始日期</span>
		<input type="text" id="datepickerb" name="begin_date" />
		<span class="label">结束日期</span>
		<input type="text" id="datepickere" name="end_date"/>
		<div class="status">
		  <input type="radio" name="status" value="all" checked="checked" />所有 
          <input type="radio" name="status" value="fail" />仅不通过 
          <input type="radio" name="status" value="pass" />仅通过 
        </div> 
		<button type="button" id="btn_q">查询</button>
	  </div>	
	  <div id="operation">
		<!--
	    <button type="button" id="btn_today">今日巡检报告</button>
        -->
		<a href="/result" id="today">今日巡检报告</a>
		<!--
		<button type="button" id="btn_total">所有巡检报告</button>
		
		<a href="/result" id="all">所有巡检报告</a>
		-->
	  </div>
    </div>
  {% include "report_list_div.html" %}
  
  <script type="text/javascript">
    var picker_begin = new Pikaday({
        field: document.getElementById("datepickerb"),
        format: 'YYYY-MM-DD'
    });
	picker_begin.setDate(new Date())
	var picker_end = new Pikaday({
        field: document.getElementById('datepickere'),
        format: 'YYYY-MM-DD'
    });
	picker_end.setDate(new Date())
	$(".distpicker1").distpicker({
	autoSelect: false
	});
	$( document ).ready( function() {
	  $("#system").val('');
	  $("#reporter").val('');
	  $("#province").val('');
	  $("#city").val('');
	  $("input[type=radio][value=all]").attr("checked",'checked');
	  var today = new Date();
	  $("#reportlist").load('{% url 'search' %}?' + 'system=&reporter=&province=&city=&' + 'begin_date=' + today + '&end_date=' + today + '&status=all');
	  $("#btn_q").click(function(){
        var q_system = $("#system").val();
	    var q_reporter = $("#reporter").val();
	    var q_province = $("#province").val();
	    var q_city = $("#city").val();
	    var q_begin_date = $("#datepickerb").val();
	    var q_end_date = $("#datepickere").val();
	    var q_status = $("input[name='status'][type='radio']:checked").val();
	    var param = 'system=' + q_system +'&reporter=' + q_reporter + '&province=' + q_province + '&city=' + q_city
	               + '&begin_date=' + q_begin_date + '&end_date=' + q_end_date + '&status=' + q_status;
        $("#reportlist").load('{% url 'search' %}?' + param);
	  });
	});
  </script>
  </body>
</html>